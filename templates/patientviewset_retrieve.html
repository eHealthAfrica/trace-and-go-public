{% extends "index.html" %}
{% load i18n %}
{% load staticfiles %}

{% block main %}

{{ block.super }}

  <div class="clearfix">
    <h2 class="pull-left"><span class="fa fa-bed"></span> Add / Edit Patient</h2>
    <button class="btn btn-success pull-right" id="save"><i class="fa fa-check"></i> Save</button>
  </div>
  <hr>
  <form action="/patients/" method="post" id="patientForm" name="patientForm">

  <div class="column">
    <div class="col-md-12" id="patientStatusSelect">

      <h3>Patient Status</h3>

      <!-- <label id="patientStatusSelect"> -->
      <!--   <input type="radio" name="status" id="patientStatus" value="{{status}}" required> {{get_status_display}} -->
      <!-- </label> -->
      <!-- <label> -->
      <!--   <input type="radio" name="status" id="patientStatus" value="oijasdf" required> {{get_status_display}} -->
      <!-- </label> -->
      <!-- <label> -->
      <!--   <input type="radio" name="status" id="patientStatus" value="oijasdf" required> {{get_status_display}} -->
      <!-- </label> -->
      <!-- <label> -->
      <!--   <input type="radio" name="status" id="patientStatus" value="aaaaaa" required> {{get_status_display}} -->
      <!-- </label> -->

    </div>
  </div>

  <div class="row">
    <div class="col-md-6">

      <h3>Patient Info</h3>

      <div class="form-group">
        <label class="control-label" for="inputError">First Name</label>
        <!-- <input type="text" class="form-control" name="firstName" value="{{first_name}}"> -->
        <input type="text" class="form-control" id="inputError" name="first_name">
      </div>

      <div class="form-group">
        <label class="control-label" for="inputError">Last Name</label>
        <input type="text" class="form-control" id="inputError" name="last_name" value="{{last_name}}">
      </div>

      <div class="form-group">
        <label class="control-label" for="inputError">Next of Kin Phone Number</label>
        <input type="text" class="form-control" id="inputError" name="contact_phone_number" value="{{contact_phone_number}}">
      </div>

      <div class="form-group">
        <label>Info Code</label>
        <input type="text" class="form-control" name="info_code" value="{{info_code}}" disabled>
      </div>

    </div>


    <div class="col-md-6">

      <h3>Internal Use</h3>

      <div class="form-group">
        <label>Patient ID</label>
        <input type="text" class="form-control" name="patient_id" value="{{ patient_id }}">
      </div>

      <div class="form-group">
        <label>Case Investigator</label>
        <select class="form-control" name="case_investigator">
          <option value="">select investigator</option>
        </select>
      </div>

      <div class="form-group">
        <label>Health Facility</label>
        <select class="form-control" name="health_facility" id="healthFacilitySelect">
          <option value="">select Health Facility</option>
          <!-- <option value="{{health_facility.health_facility_id}}">{{health_facility.name}}</option> -->
        </select>
      </div>

    </div>

  </div>

  </form>
  <hr>

  <div class="row">
    <div class="col-md-12">
      <h3>Status Notifications</h3>
      <ul class="list-group">
        {% for r in revisions %}
          <li class="list-group-item">
          {{ r.user.username }} changed
          {% for k, v in r.diff.items %}
            {% if k == 'first_name' %}first name
            {% elif k == 'last_name' %}last name
            {% elif k == 'contact_phone_number' %}phone
            {% elif k == 'patient_id' %}Patient ID
            {% elif k == 'health_facility' %}health facility
            {% elif k == 'status' %}status
            {% endif %}:
            {{ v | safe}}
          {% endfor %}
          {{ r.timestamp | timesince}}
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>

{% endblock %}

{% block javascript %}
  {{ block.super }}
{% endblock %}
