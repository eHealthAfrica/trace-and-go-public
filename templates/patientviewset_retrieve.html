{% extends "index.html" %}
{% load i18n %}

{% block main %}


  <div class="clearfix">
    <h2 class="pull-left"><span class="fa fa-bed"></span> Add / Edit Patient</h2>

    <button class="btn btn-success pull-right"><i class="fa fa-check"></i> Save</button>

  </div>
  <hr>

  <form>

  <div class="row">
    <div class="col-md-12">

      <h3>Patient Status</h3>
      <label>
        <input type="radio" name="status" value="{{data.status}}"> {{data.get_status_display}}
      </label>

    </div>
  </div>

  <div class="row">
    <div class="col-md-6">

      <h3>Patient Info</h3>

      <div class="form-group">
        <label>First Name</label>
        <input type="text" class="form-control" value="{{data.first_name}}">
      </div>

      <div class="form-group">
        <label>Last Name</label>
        <input type="text" class="form-control" value="{{data.last_name}}">
      </div>

      <div class="form-group">
        <label>Next of Kin Phone Number</label>
        <input type="text" class="form-control" value="{{data.contact_phone_number}}">
      </div>

      <div class="form-group">
        <label>Info Code</label>
        <input type="text" class="form-control" value="{{data.info_code}}">
      </div>

    </div>


    <div class="col-md-6">

      <h3>Internal Use</h3>

      <div class="form-group">
        <label>Patient ID</label>
        <input type="text" class="form-control" value="{{ data.patient_id }}">
      </div>

      <div class="form-group">
        <label>Case Investigator</label>
        <select>
          <option value="">select investigator</option>
        </select>
      </div>

      <div class="form-group">
        <label>Health Facility</label>
        <select>
          <option value="{{data.health_facility.health_facility_id}}">{{data.health_facility.name}}</option>
        </select>
      </div>

    </div>

  </div>

  </form>
  <hr>

  <div class="row">
    <div class="col-md-12">
      <h3>Status Notifications</h3>
      <ul class="list-group">
        {% for r in revisions %}
          <li class="list-group-item">
          {{ r.user.username }} changed
          {% for k, v in r.diff.items %}
            {% if k == 'first_name' %}first name
            {% elif k == 'last_name' %}last name
            {% elif k == 'contact_phone_number' %}phone
            {% elif k == 'patient_id' %}Patient ID
            {% elif k == 'health_facility' %}health facility
            {% elif k == 'status' %}status
            {% endif %}:
            {{ v | safe}}
          {% endfor %}
          {{ r.timestamp | timesince}}
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>

{% endblock %}
